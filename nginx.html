<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NGINX Configuration Guide</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" type="text/css" href="main.css" />
    <style>
      :root {
        --primary-color: #051e30;
        --secondary-color: #1a3350;
        --accent-color: #00ff9d;
        --text-color: #c3e4fc;
        --transition: all 0.3s ease;
      }

      .blog-container {
        max-width: 1300px;
        margin: 0 auto;
        padding: 40px 20px;
        display: flex;
        flex-direction: column;
        min-height: calc(100vh - 100px);
      }

      .blog-card {
        background: var(--secondary-color);
        border-radius: 20px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        padding: 35px;
        margin: 20px 0;
        backdrop-filter: blur(10px);
      }

      .post-date {
        display: block;
        font-family: "Space Grotesk", sans-serif;
        font-size: 14px;
        color: #74b8ff; /* Changed the color to a nice light blue */
        letter-spacing: -0.02em;
        text-align: left;
        margin: 10px 0 20px 0;
        padding: 3px 0;
        opacity: 0.8;
        font-weight: 400;
        max-width: max-content;
      }
      /* Remove any unwanted lines or sections */
      .card-header {
        margin-bottom: 10px;
        padding-bottom: 0;
        border-bottom: none;
      }

      h1 {
        font: 40px/1 "Space Grotesk", sans-serif;
        margin-bottom: 30px;
        color: var(--accent-color);
        text-transform: capitalize;
        letter-spacing: -0.05em;
        animation: fadeDown 0.6s ease;
      }

      h2 {
        font: 22px "Space Grotesk", sans-serif;
        margin: 30px 0;
        color: var(--accent-color);
        border-bottom: 2px solid rgba(0, 255, 157, 0.2);
        padding-bottom: 10px;
        animation: slideIn 0.4s ease;
      }

      h3 {
        font-size: 18px;
        margin: 5px 0 10px 0;
        color: var(--text-color);
        font-weight: 600;
      }

      p {
        font-family: "Inter", sans-serif;
        line-height: 1.7;
        margin-bottom: 20px;
        opacity: 0.98;
      }

      .ordered-list,
      .unordered-list {
        counter-reset: list;
        padding-left: 30px;
        margin: 20px 0;
        animation: fadeUp 0.4s ease;
      }

      .list {
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        counter-increment: list;
      }

      .list::before {
        content: "- ";
        color: var(--accent-color);
        margin-right: 10px;
      }

      pre {
        animation: slideLeft 0.6s ease;
        background: hsl(0, 0%, 9%);
        border-left: 4px solid var(--accent-color);
        color: var(--text-color);
        padding: 0px 20px;
        overflow-x: auto;
        font-size: 0.95em;
        border-radius: 8px;
        margin: 30px 0;
        backdrop-filter: blur(5px);
      }

      .subCode {
        animation: slideUp 0.4s ease;
        font-family: "SFMono-Regular", monospace;
        background: rgba(15, 35, 55, 0.7);
        color: var(--accent-color);
        padding: 0.2rem 0.5rem;
        border-radius: 3px;
        display: inline-block;
        margin: 0 5px;
        border: 1px solid rgba(0, 255, 157, 0.2);
      }

      @keyframes fadeDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes fadeUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideLeft {
        from {
          opacity: 0;
          transform: translateX(20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        background: hsl(236, 93%, 9%);
      }

      ::-webkit-scrollbar-thumb {
        background: hsl(236, 93%, 15%);
        border-radius: 4px;
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <div class="logo">Sarath Molathoti</div>
      <ul class="nav-links">
        <li><a href="#home">Home</a></li>
        <li><a href="#skills">Skills</a></li>
        <li><a href="#work">Work</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
    <main class="blog-container">
      <article class="blog-card">
        <div class="card-header">
          <h1 class="blog-card-title">
            A Comprehensive Guide to NGINX Configuration
          </h1>
          <span class="post-date underline"
            >Published on September 28, 2024</span
          >
        </div>

        <h2>What is a Web Server?</h2>
        <p>
          A web server is a computer system that hosts websites and delivers web
          pages to users' browsers when they type in a website's URL (like
          www.example.com). It works by responding to requests from web browsers
          (like Chrome, Firefox, etc.) and sending the appropriate web page
          back. The web server listens to requests, finds the required files
          (like HTML, images, etc.), and sends them back to the user over the
          internet.
        </p>
        <b>Example of a simple web request:</b>
        <ol class="ordered-list">
          <li class="list">You type "www.example.com" in your browser.</li>
          <li class="list">
            The browser sends a request to the web server hosting that website.
          </li>
          <li class="list">
            The web server looks for the files (HTML, CSS, etc.) for that
            website.
          </li>
          <li class="list">
            It sends those files back to your browser, which displays the
            website.
          </li>
        </ol>
        <h2>What is Nginx?</h2>
        <p>
          Nginx (pronounced 'Engine-X') is one of the most popular web servers
          used today. Itâ€™s known for being fast, reliable, and able to handle
          many requests at once. Apart from serving web pages, Nginx can also be
          used as a reverse proxy, load balancer, and more. Nginx is
          particularly good at serving static files like images, CSS, and
          JavaScript quickly and efficiently.
        </p>

        <h2>1. NGINX Directives and Contexts</h2>
        <h3>Directives:</h3>
        <p>
          Directives are the building blocks of NGINX configuration. A directive
          is a command that defines specific behaviors or settings for NGINX. It
          consists of a keyword followed by parameters and ends with a semicolon
          (<code class="subCode">;</code>).
        </p>

        <p>Example:</p>
        <pre><code >worker_processes 4;</code></pre>
        <p>This directive tells NGINX to use 4 worker processes.</p>

        <h3>Context:</h3>
        <p>
          A context groups directives and applies them to specific blocks of
          configuration. Common contexts include:
        </p>
        <ul class="unordered-list">
          <li class="list">
            <code class="subCode">http {}</code>: Contains HTTP server-wide
            configurations.
          </li>
          <li class="list">
            <code class="subCode">server {}</code>: Contains settings specific
            to a virtual host or domain.
          </li>
          <li class="list">
            <code class="subCode">location {}</code>: Defines rules for specific
            URIs.
          </li>
        </ul>

        <p>Example:</p>
        <pre><code>
  http {
      server {
          listen 80;
          server_name example.com;
          
          location / {
              root /var/www/html;
              index index.html;
          }
      }
  }
      </code></pre>
        <p>
          This configuration tells NGINX to listen on port 80 and serve files
          from
          <code class="subCode">/var/www/html</code> for requests to
          example.com.
        </p>

        <h2>2. MIME Types</h2>
        <p>
          MIME types help browsers handle files appropriately by indicating the
          type of file being served. For example,
          <code class="subCode">.html</code> files should be served as
          <code class="subCode">text/html</code>, and images like
          <code class="subCode">.jpg</code> as
          <code class="subCode">image/jpeg</code>.
        </p>
        <p>
          In NGINX, MIME types are usually defined in the
          <code class="subCode">mime.types</code> file:
        </p>
        <pre><code>
  http {
      include /etc/nginx/mime.types;
      default_type application/octet-stream;
  }
      </code></pre>
        <p>
          The <code class="subCode">default_type</code> directive sets a default
          MIME type when one cannot be determined.
        </p>

        <h2>3. Root vs Alias with Example</h2>
        <h3>Root:</h3>
        <p>
          The <code class="subCode">root</code> directive appends the URI
          requested by the client to the specified root directory.
        </p>

        <p>Example:</p>
        <pre><code>
  location /images/ {
      root /var/www/html;
  }
      </code></pre>
        <p>
          If a client requests <code class="subCode">/images/photo.jpg</code>,
          NGINX will look for the file in
          <code class="subCode">/var/www/html/images/photo.jpg</code>.
        </p>

        <h3>Alias:</h3>
        <p>
          The <code class="subCode">alias</code> directive replaces the location
          blockâ€™s URI with the specified directory.
        </p>

        <p>Example:</p>
        <pre><code>
  location /downloads/ {
      alias /var/www/static/;
  }
      </code></pre>
        <p>
          If a client requests <code class="subCode">/downloads/file.txt</code>,
          NGINX will serve the file from
          <code class="subCode">/var/www/static/file.txt</code>.
        </p>

        <h2>4. Redirects and Rewrites</h2>
        <h3>Redirects:</h3>
        <p>
          Redirects tell the browser to visit a different URL. NGINX supports
          several types of redirects, such as:
        </p>
        <ul class="unordered-list">
          <li class="list">
            <b>301 (Permanent Redirect) :</b>This tells the browser that the
            resource has permanently moved to a new location, and it should
            update its cache.
          </li>
          <li class="list">
            <b>302 (Found/Temporary Redirect) : </b>Indicates a temporary move,
            but the browser should not update the URL in its cache.
          </li>
          <li class="list">
            <b>307 (Temporary Redirect) : </b>Similar to 302, but it ensures
            that the request method remains the same (e.g., a POST request stays
            a POST request).
          </li>
        </ul>

        <p>
          Example of a 301 Redirect using the
          <code class="subCode">return</code> directive:
        </p>
        <pre><code>
  server {
      listen 80;
      server_name old-site.com;
      
      location / {
          return 301 https://new-site.com$request_uri;
      }
  }
      </code></pre>

        <h3>Rewrites:</h3>
        <p>
          The <code class="subCode">rewrite</code> directive allows for
          modifying the request URI before NGINX processes it, typically used
          for URL restructuring or SEO.
        </p>
        <p>Example:</p>
        <pre><code>
  server {
      location /old-page {
          rewrite ^/old-page$ /new-page permanent;
      }
  }
      </code></pre>

        <h2>5. Proxy Pass and Upstream Servers</h2>
        <p>
          NGINX is often used as a reverse proxy, forwarding client requests to
          backend servers. The <code class="subCode">proxy_pass</code> directive
          facilitates this.
        </p>

        <h3>Upstream Servers:</h3>
        <p>
          When NGINX is used to load balance traffic between multiple backend
          servers, the <code class="subCode">upstream</code> block defines a
          pool of servers.
        </p>
        <p>Example:</p>
        <pre><code>
  upstream backend {
      server backend1.example.com;
      server backend2.example.com;
  }
  
  server {
      listen 80;
      server_name example.com;
  
      location /api/ {
          proxy_pass http://backend;
      }
  }
      </code></pre>
        <h2>6. Additional HTTP Security Headers</h2>
        <p>
          Beyond basic configurations, NGINX can improve your web application's
          security by adding HTTP security headers. These headers protect
          against attacks such as cross-site scripting (XSS) and clickjacking.
        </p>

        <h3>Content Security Policy (CSP):</h3>
        Helps mitigate XSS attacks by controlling which resources (scripts,
        images, etc.) the browser is allowed to load.
        <pre><code>
add_header Content-Security-Policy "default-src 'self'; script-src 'self' https://apis.example.com";
    </code></pre>

        <h3>X-Frame-Options:</h3>
        Prevents clickjacking by controlling whether your site can be embedded
        in an iframe.
        <pre><code>
add_header X-Frame-Options "SAMEORIGIN";
    </code></pre>

        <h3>Strict-Transport-Security (HSTS):</h3>
        Informs the browser that the website should only be accessed over HTTPS.
        <pre><code>
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    </code></pre>

        <h3>X-Content-Type-Options:</h3>
        Prevents browsers from interpreting files as a different MIME type,
        reducing security risks.
        <pre><code>
add_header X-Content-Type-Options "nosniff";
    </code></pre>

        <h3>X-XSS-Protection:</h3>
        Enables cross-site scripting filtering in the browser.
        <pre><code>
add_header X-XSS-Protection "1; mode=block";
    </code></pre>

        <h2>Conclusion</h2>
        <p>
          NGINX is a highly versatile and powerful tool that can serve as a web
          server, reverse proxy, or load balancer. Understanding how to
          configure directives, contexts, MIME types, root, alias, redirects,
          rewrites, proxy_pass, and security headers allows you to set up
          efficient and secure web applications.
        </p>
        <p>
          Whether you're serving static content or managing complex traffic
          distribution, mastering these configurations will help you effectively
          manage your server infrastructure and security.
        </p>
      </article>
    </main>
  </body>
</html>
